generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "mysql"
  url               = env("DATABASE_URL")
  shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model session {
  id            String    @id @db.VarChar(255)
  shop          String    @db.VarChar(255)
  state         String    @db.VarChar(255)
  isOnline      Boolean   @default(false)
  scope         String?   @db.Text
  expires       DateTime?
  accessToken   String    @db.Text
  userId        BigInt?
  firstName     String?
  lastName      String?
  email         String?   @db.VarChar(320)
  accountOwner  Boolean   @default(false)
  locale        String?   @db.VarChar(20)
  collaborator  Boolean?  @default(false)
  emailVerified Boolean?  @default(false)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @default(now()) @updatedAt
}

model shop {
  id            Int       @id @default(autoincrement())
  shop          String    @unique(map: "Shop_shop_key")
  accessToken   String?
  installed     Boolean   @default(false)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  onboardedAt   DateTime?
  uninstalledAt DateTime?
}

model notificationconfig {
  id                   Int      @id @default(autoincrement())
  createdAt            DateTime @default(now())
  updatedAt            DateTime @default(now()) @updatedAt
  shop                 String
  key                  String
  enabled              Boolean  @default(false)
  showType             String?
  messageText          String?
  fontFamily           String?
  position             String?
  animation            String?
  mobileSize           String?
  mobilePositionJson   String?
  titleColor           String?
  bgColor              String?
  msgColor             String?
  ctaBgColor           String?
  rounded              Int?
  durationSeconds      Int?
  alternateSeconds     Int?
  fontWeight           Int?
  messageTitlesJson    String?  @db.LongText
  orderDays            Int?     @default(7)
  createOrderTime      String?  @db.VarChar(32)
  orderDate            String?  @db.VarChar(32)
  locationsJson        String?  @db.LongText
  namesJson            String?  @db.LongText
  selectedProductsJson String?  @db.LongText
  iconKey              String?
  iconSvg              String?  @db.LongText

  @@index([shop, key], map: "NotificationConfig_shop_key_idx")
}

model popupanalyticsevent {
  id            Int      @id @default(autoincrement())
  shop          String   @db.VarChar(255)
  popupType     String   @db.VarChar(32)
  eventType     String   @db.VarChar(32)
  visitorId     String?  @db.VarChar(128)
  productHandle String?  @db.VarChar(128)
  pagePath      String?  @db.VarChar(255)
  sourceUrl     String?  @db.VarChar(500)
  createdAt     DateTime @default(now())

  @@index([shop, createdAt], map: "PopupAnalyticsEvent_shop_createdAt_idx")
  @@index([shop, popupType, eventType, createdAt], map: "PopupAnalyticsEvent_shop_type_event_createdAt_idx")
  @@index([shop, visitorId], map: "PopupAnalyticsEvent_shop_visitorId_idx")
}
